statsprinter_scriptStatus = (getRunScriptSetting "statsprinter");

if (strcmp $statsprinter_scriptStatus "true") [
	round = [
		   split = (strreplace $arg1 "." " ");
		   result (concatword (at $split 0) "." (substr (at $split 1) 0 $arg2));
	]

	print_stats = [
		   red  = [ result "^fs^f3"; ]
		   blue = [ result "^fs^f1"; ]
		   
		   frags   = (getfrags);
		   deaths  = (getdeaths);
		   acc     = (getaccuracy);
		   flags   = (getflags);
		   
		   ldeaths = $deaths;
		   if (= $ldeaths 0) [ ldeaths = 1; ]
		   kpd = (round (divf $frags $ldeaths) 2)
		   
		   if (> $flags 0) [ flags = (concatword (blue) " Flags: " (red) $flags); ][ flags = ""; ]
		   
		   echo (concatword (blue) "Name: " (red) (getname) (blue) " Frags: " (red) $frags (blue) " Deaths: " (red) $deaths (blue) " Acc: " (red) $acc "%" (blue) " KpD: " (red) $kpd $flags);
	]
	bindKey "statsprinter" "print_stats";
]
