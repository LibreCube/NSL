noobautosorry_scriptStatus = (getRunScriptSetting "noobautosorry");

if (= (strcmp $noobautosorry_scriptStatus "false") 0) [

	// Load the script options
		
		noobautosorry_options = (getRunScriptOptions "noobautosorry");

	// Say sorry to the team or to all players?
		noobautosorry_sayToOption = (getRunScriptSpecificOptions $noobautosorry_options "sayto");
	
		if (strcmp $noobautosorry_sayToOption "all") [
			alias noobautosorry_howTo say;
		][
			alias noobautosorry_howTo sayteam;
		]

	// Which message should be posted?
		noobautosorry_srymsg = (getRunScriptSpecificOptions $noobautosorry_options "srymsg");
		
		if (strcmp $noobautosorry_srymsg "") [
			noobautosorry_srymsg = "Sorry for that teamkill!";
		]

	// You did a teamkill? Shame on you!
	noob_autosorry = [
			noobautosorry_lastMode = (getmode); 
			noobautosorry_lastMap = (mapname); 
			noobautosorry_lastFrags = (getfrags); 
			noobsautosorry_lastDeaths = (getdeaths); 
		
		sleep 250 [
			if (&& (strcmp $noobautosorry_lastMode (getmode)) (strcmp $noobautosorry_lastMap (mapname))) [
				//if (&& (&& (!= (getmode) -2) (!= (getmode) -3)) (&& (!= (getmode) -1) (!= (getmode) 1))) [
				if (= (isTeammode (getmode)) 1) [
					if (< (getfrags) $noobautosorry_lastFrags) [
						
						if (= (getdeaths) $noobsautosorry_lastDeaths) [
							$noobautosorry_howTo $noobautosorry_srymsg;
						]
					]
				]
			]
			if (= (isconnected) 1) [
				noob_autosorry;
			][
				noob_autosorryCheckIfConnected;
			]
		]	
	]
	
	
	noob_autosorryCheckIfConnected = [
		if (= (isconnected) 1) [
			noobautosorry_lastMode = "";
			noobautosorry_lastMap = ""; 
			noob_autosorry;
		][
			sleep 400 [
				noob_autosorryCheckIfConnected;
			]
		]
	]
	
	noob_autosorryCheckIfConnected;
	
]